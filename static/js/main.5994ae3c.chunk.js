(this["webpackJsonphighspeedrail-app"]=this["webpackJsonphighspeedrail-app"]||[]).push([[0],{11:function(t,e,n){},12:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var a=n(1),i=n.n(a),c=n(4),r=n.n(c),s=(n(11),n(12),[{id:"1000",station:"\u53f0\u5317"},{id:"1010",station:"\u677f\u6a4b"},{id:"1020",station:"\u6843\u5712"},{id:"1030",station:"\u65b0\u7af9"},{id:"1040",station:"\u53f0\u4e2d"},{id:"1050",station:"\u5609\u7fa9"},{id:"1060",station:"\u53f0\u5357"},{id:"1070",station:"\u5de6\u71df"}]),o=n(5),l=n.n(o),d=n(6),u=n(2),j=n(0),b=i.a.createContext(),h=function(t){var e=t.children,n=Object(a.useState)(!1),i=Object(u.a)(n,2),c=i[0],r=i[1],s=Object(a.useState)(null),o=Object(u.a)(s,2),h=o[0],O=o[1],p=Object(a.useState)(""),x=Object(u.a)(p,2),f=x[0],v=x[1],g=Object(a.useState)(""),S=Object(u.a)(g,2),m=S[0],D=S[1],F=Object(a.useState)(!1),T=Object(u.a)(F,2),C=T[0],E=T[1],k="https://ptx.transportdata.tw/MOTC/v2/Rail/THSR/ODFare/".concat(f,"/to/").concat(m,"?$top=1&$format=JSON");console.log("StartStation\u70ba",f),console.log("EndStation\u70ba",m),console.log("trainData\u70ba",h);var w=function(){var t=Object(d.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==f&&""!==m&&!1!==C){t.next=2;break}return t.abrupt("return");case 2:return r(!0),console.log("loading start"),t.prev=4,t.next=7,fetch(k);case 7:return e=t.sent,t.next=10,e.json();case 10:n=t.sent,O(n),r(!1),console.log("loading finish"),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),console.log("\u6293\u53d6api\u7570\u5e38");case 19:case"end":return t.stop()}}),t,null,[[4,16]])})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){w(),E(!1),v(""),D("")}),[C]),Object(j.jsx)(b.Provider,{value:{loading:c,setLoading:r,trainData:h,setTrainData:O,startStation:f,setStartStation:v,endStation:m,setEndStation:D,url:k,getData:w,setIsSending:E},children:e})},O=function(){return Object(a.useContext)(b)};var p=function(){var t=O(),e=t.startStation,n=t.setStartStation,a=t.setEndStation,i=t.setIsSending;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{children:["\u4e58\u8eca\u8d77\u9ede:",Object(j.jsxs)("select",{defaultValue:"DEFAULT",onChange:function(t){return n(t.target.value)},children:[Object(j.jsx)("option",{value:"DEFAULT",disabled:!0,children:"\u8acb\u9078\u64c7"}),s.map((function(t){var e=t.station,n=t.id;return Object(j.jsx)("option",{value:n,children:e},n)}))]})]}),Object(j.jsxs)("div",{children:["\u4e58\u8eca\u7d42\u9ede:",Object(j.jsxs)("select",{defaultValue:"DEFAULT",onChange:function(t){return a(t.target.value)},children:[Object(j.jsx)("option",{value:"DEFAULT",disabled:!0,children:"\u8acb\u9078\u64c7"}),s.map((function(t){var n=t.station,a=t.id;return Object(j.jsx)("option",{value:a,disabled:a===e,children:n},a)}))]})]}),Object(j.jsx)("button",{type:"button",onClick:function(){i(!0)},children:"\u67e5\u8a62"})]})},x=function(){return Object(j.jsx)("div",{className:"loading",children:Object(j.jsx)("h1",{children:"loading..."})})};var f=function(){var t=O().trainData;return Object(j.jsx)(j.Fragment,{children:t&&Object(j.jsxs)("div",{children:[Object(j.jsxs)("h3",{children:[t[0].OriginStationName.Zh_tw,"---",t[0].DestinationStationName.Zh_tw]}),t[0].Fares.map((function(t,e){var n=t.TicketType,a=t.Price;return Object(j.jsx)("div",{children:Object(j.jsxs)("h3",{children:[n,":$",a]})},e)}))]})})};var v=function(){return O().loading?Object(j.jsx)(x,{}):Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("header",{className:"App-header",children:[Object(j.jsx)("p",{children:"\u9ad8\u9435\u7968\u50f9\u67e5\u8a62\u7cfb\u7d71"}),Object(j.jsx)(p,{}),Object(j.jsx)(f,{})]})})},g=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),a(t),i(t),c(t),r(t)}))};r.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(h,{children:Object(j.jsx)(v,{})})}),document.getElementById("root")),g()}},[[15,1,2]]]);
//# sourceMappingURL=main.5994ae3c.chunk.js.map